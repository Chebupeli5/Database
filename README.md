# **База данных проекта Финансик**

База данных **Финансик** предназначена для управления персональными финансами пользователей. Она хранит информацию о пользователях, их финансовых целях, сбережениях, кредитах, категориях расходов, операциях и отчетах.

Все таблицы связаны через **внешние ключи** с таблицей `Users`, которая является центральной сущностью системы.

---

## **Сущности базы данных**

### **1. Users** — Пользователи

**Описание:** Основная таблица, содержащая информацию о зарегистрированных пользователях.

| Поле         | Тип     | Описание                                   |
| ------------ | ------- | ------------------------------------------ |
| `user_id`    | int     | Уникальный идентификатор пользователя (PK) |
| `login`      | varchar | Логин пользователя (уникальный)            |
| `password`   | varchar | Пароль пользователя                        |
| `visualname` | varchar | Отображаемое имя пользователя (уникальное) |

**Ограничения:**

* `PRIMARY KEY` по `user_id`
* `UNIQUE` по `login` и `visualname`

---

### **2. Financial Goals** — Финансовые цели

**Описание:** Таблица для хранения финансовых целей пользователей.

| Поле        | Тип  | Описание                                 |
| ----------- | ---- | ---------------------------------------- |
| `user_id`   | int  | Ссылка на пользователя                   |
| `goal_name` | text | Название цели                            |
| `goal`      | int  | Сумма или количество для достижения цели |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`

---

### **3. Loans** — Кредиты

**Описание:** Таблица для учета кредитов пользователей.

| Поле           | Тип   | Описание                             |
| -------------- | ----- | ------------------------------------ |
| `user_id`      | int   | Ссылка на пользователя               |
| `credit_name`  | text  | Название кредита                     |
| `loan_balance` | money | Остаток по кредиту (может быть NULL) |
| `loan_payment` | money | Сумма платежа                        |
| `payment_date` | date  | Дата следующего платежа              |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`

---

### **4. Notifications** — Уведомления

**Описание:** Таблица уведомлений для пользователей.

| Поле      | Тип  | Описание               |
| --------- | ---- | ---------------------- |
| `user_id` | int  | Ссылка на пользователя |
| `message` | text | Текст уведомления      |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`

---

### **5. Savings Accounts** — Сберегательные счета

**Описание:** Таблица для учета сберегательных счетов пользователей.

| Поле            | Тип      | Описание               |
| --------------- | -------- | ---------------------- |
| `user_id`       | int      | Ссылка на пользователя |
| `saving_name`   | text     | Название счета         |
| `balance`       | money    | Текущий баланс         |
| `interest_rate` | smallint | Процентная ставка      |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`

---

### **6. Categories** — Категории расходов и доходов

**Описание:** Таблица категорий, по которым ведутся финансовые операции.

| Поле          | Тип   | Описание                                |
| ------------- | ----- | --------------------------------------- |
| `category_id` | int   | Уникальный идентификатор категории (PK) |
| `user_id`     | int   | Ссылка на пользователя                  |
| `name`        | text  | Название категории                      |
| `balance`     | money | Баланс категории                        |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`

---

### **7. Category Limit** — Лимиты на категории

**Описание:** Таблица лимитов расходов для каждой категории пользователя.

| Поле          | Тип   | Описание               |
| ------------- | ----- | ---------------------- |
| `user_id`     | int   | Ссылка на пользователя |
| `category_id` | int   | Ссылка на категорию    |
| `limit`       | money | Лимит расходов         |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`
* `FOREIGN KEY (category_id)` → `Categories(category_id)`

---

### **8. Assets** — Активы

**Описание:** Таблица для учета активов пользователя (например, дебетовые карты, ценные бумаги, недвижимость).

| Поле      | Тип  | Описание                        |
| --------- | ---- | ------------------------------- |
| `user_id` | int  | Ссылка на пользователя          |
| `name`    | text | Название актива                 |
| `balance` | int  | Стоимость или количество актива |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`

---

### **9. Operations** — Финансовые операции

**Описание:** Таблица операций (доходы, расходы, переводы).

| Поле           | Тип     | Описание                                    |
| -------------- | ------- | ------------------------------------------- |
| `operation_id` | int     | Уникальный идентификатор операции (PK)      |
| `user_id`      | int     | Ссылка на пользователя                      |
| `category_id`  | int     | Ссылка на категорию операции                |
| `type`         | varchar | Тип операции (расход, доход, перевод и др.) |
| `transaction`  | int     | Сумма или количество                        |
| `date`         | date    | Дата операции                               |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`
* `FOREIGN KEY (category_id)` → `Categories(category_id)`

---

### **10. Reports** — Отчеты

**Описание:** Таблица для хранения отчетов пользователей в формате JSON.

| Поле      | Тип  | Описание                        |
| --------- | ---- | ------------------------------- |
| `user_id` | int  | Ссылка на пользователя          |
| `file`    | json | Файл отчета (финансовая сводка) |

**Связи:**

* `FOREIGN KEY (user_id)` → `Users(user_id)`

---

**Схема Базы Данных**:
<img width="946" height="801" alt="image" src="https://github.com/user-attachments/assets/d14e65aa-8a8d-4797-8617-0e560aca42fb" />

